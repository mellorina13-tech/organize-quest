<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Organize.Quest - Local Community Hub</title>
    <meta name="description" content="Build your local community network. Create, discover, and join organizations in your neighborhood.">
    
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cdefs%3E%3ClinearGradient id='grad' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%236366f1'/%3E%3Cstop offset='100%25' style='stop-color:%23ec4899'/%3E%3C/linearGradient%3E%3C/defs%3E%3Ccircle cx='50' cy='50' r='45' fill='url(%23grad)'/%3E%3Cpath d='M50 20 L65 40 L85 40 L70 55 L75 75 L50 60 L25 75 L30 55 L15 40 L35 40 Z' fill='white'/%3E%3C/svg%3E">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['"Plus Jakarta Sans"', 'sans-serif'],
                    },
                    colors: {
                        primary: '#6366f1', // Indigo
                        secondary: '#ec4899', // Pink
                        dark: '#0f172a',
                    },
                    animation: {
                        'float': 'float 6s ease-in-out infinite',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-20px)' },
                        }
                    }
                }
            }
        }
    </script>

    <style>
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 10px; }
        ::-webkit-scrollbar-track { background: #f1f5f9; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 5px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
        
        /* Glass Effect */
        .glass {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border-bottom: 1px solid rgba(0,0,0,0.05);
        }
        
        .blob {
            position: absolute;
            filter: blur(80px);
            z-index: -1;
            opacity: 0.4;
        }

        /* Carousel Styles (Preserving Logic) */
        .carousel-track { transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1); }
        .carousel-dot.active { background-color: #6366f1; width: 32px; }
    </style>
</head>
<body class="font-sans text-slate-600 bg-slate-50 antialiased selection:bg-indigo-500 selection:text-white overflow-x-hidden">

    <div id="cookieBanner" class="fixed bottom-0 inset-x-0 z-[60] transform translate-y-full transition-transform duration-500">
        <div class="bg-dark/95 backdrop-blur text-white p-4 md:p-6 shadow-[0_-10px_40px_rgba(0,0,0,0.1)]">
            <div class="max-w-7xl mx-auto flex flex-col md:flex-row items-center justify-between gap-4">
                <div class="flex-1 text-center md:text-left">
                    <h3 class="font-bold text-lg mb-1">üç™ Cookie Notice</h3>
                    <p class="text-sm text-slate-300">We use cookies to improve your community experience. By continuing, you agree to our use of cookies.</p>
                </div>
                <div class="flex gap-3">
                    <button id="declineCookies" class="px-6 py-2.5 rounded-xl border border-white/20 hover:bg-white/10 transition-colors text-sm font-semibold">Decline</button>
                    <button id="acceptCookies" class="px-6 py-2.5 rounded-xl bg-indigo-600 hover:bg-indigo-500 transition-colors text-white text-sm font-semibold shadow-lg shadow-indigo-500/30">Accept</button>
                </div>
            </div>
        </div>
    </div>

    <nav class="fixed top-0 w-full z-50 glass">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-20">
                <a href="#" class="flex items-center gap-2 group">
                    <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-indigo-500 to-pink-500 flex items-center justify-center text-white text-xl shadow-lg shadow-indigo-500/20 group-hover:scale-110 transition-transform">
                        <i class="fa-solid fa-map-location-dot"></i>
                    </div>
                    <span id="logoText" class="font-bold text-xl text-slate-900 tracking-tight">Organize<span class="text-indigo-600">.Quest</span></span>
                </a>

                <div class="flex items-center gap-4">
                    <div class="bg-slate-100 p-1 rounded-lg flex items-center">
                        <button id="btnEN" class="px-3 py-1 rounded-md text-sm font-bold transition-all bg-white shadow-sm text-indigo-600">EN</button>
                        <button id="btnTR" class="px-3 py-1 rounded-md text-sm font-bold text-slate-500 hover:text-indigo-600 transition-all">TR</button>
                    </div>

                    <div class="hidden md:flex items-center gap-3">
                        <a href="organizations.html" id="openMapBtn" class="text-slate-600 hover:text-indigo-600 font-semibold px-4 py-2 transition-colors">Open Map</a>
                        
                        <div id="authButtons">
                            <a href="profile.html" id="loginBtn" class="px-6 py-2.5 rounded-full bg-slate-900 text-white font-semibold hover:bg-slate-800 transition-all shadow-lg shadow-slate-900/20">Log In</a>
                            
                            <div id="userMenu" class="relative hidden group">
                                <button id="userMenuBtn" class="flex items-center gap-2 px-4 py-2 rounded-full bg-slate-100 hover:bg-slate-200 transition-colors">
                                    <div class="w-8 h-8 rounded-full bg-gradient-to-r from-indigo-500 to-purple-500 flex items-center justify-center text-white text-xs">
                                        <i class="fa-solid fa-user"></i>
                                    </div>
                                    <span id="userMenuName" class="font-semibold text-sm text-slate-700 max-w-[100px] truncate">User</span>
                                    <i class="fa-solid fa-chevron-down text-xs text-slate-400"></i>
                                </button>
                                
                                <div id="userDropdown" class="absolute right-0 mt-2 w-48 bg-white rounded-xl shadow-xl border border-slate-100 hidden py-2 animate-in fade-in slide-in-from-top-2">
                                    <a href="profile.html" class="block px-4 py-2 text-sm text-slate-600 hover:bg-slate-50 hover:text-indigo-600">
                                        <i class="fa-solid fa-id-card mr-2"></i> My Profile
                                    </a>
                                    <a href="#" id="logoutDropdown" class="block px-4 py-2 text-sm text-red-500 hover:bg-red-50">
                                        <i class="fa-solid fa-arrow-right-from-bracket mr-2"></i> Logout
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <section class="relative pt-32 pb-20 lg:pt-48 lg:pb-32 overflow-hidden">
        <div class="blob bg-purple-300 w-96 h-96 rounded-full top-0 left-0 -translate-x-1/2 -translate-y-1/2"></div>
        <div class="blob bg-indigo-300 w-96 h-96 rounded-full bottom-0 right-0 translate-x-1/2 translate-y-1/2"></div>

        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
            <div class="grid lg:grid-cols-2 gap-12 items-center">
                <div class="text-center lg:text-left">
                    <div class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-indigo-50 border border-indigo-100 text-indigo-600 text-sm font-bold mb-6">
                        <span class="flex h-2 w-2 rounded-full bg-indigo-600"></span>
                        New way to connect locally
                    </div>
                    <h1 id="heroTitle" class="text-5xl lg:text-7xl font-extrabold text-slate-900 leading-tight mb-6">
                        Build Your Local <br>
                        <span class="text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 to-pink-500">Community Network</span>
                    </h1>
                    <p id="heroDesc" class="text-xl text-slate-500 mb-8 max-w-2xl mx-auto lg:mx-0 leading-relaxed">
                        Create, discover, and join organizations in your neighborhood. Turn online connections into real-world friendships.
                    </p>
                    
                    <div class="flex flex-col sm:flex-row items-center gap-4 justify-center lg:justify-start">
                        <a href="organizations.html" id="heroMapBtn" class="px-8 py-4 rounded-full bg-indigo-600 text-white font-bold hover:bg-indigo-700 transition-all shadow-xl shadow-indigo-600/20 hover:scale-105 flex items-center gap-2">
                            <i class="fa-solid fa-compass"></i> Start Exploring
                        </a>
                        <div class="flex items-center gap-4 text-sm font-semibold text-slate-600 pl-4">
                            <div class="flex -space-x-3">
                                <img class="w-10 h-10 rounded-full border-2 border-white" src="https://i.pravatar.cc/100?img=1" alt="">
                                <img class="w-10 h-10 rounded-full border-2 border-white" src="https://i.pravatar.cc/100?img=5" alt="">
                                <img class="w-10 h-10 rounded-full border-2 border-white" src="https://i.pravatar.cc/100?img=8" alt="">
                                <div class="w-10 h-10 rounded-full border-2 border-white bg-slate-100 flex items-center justify-center text-xs">+1k</div>
                            </div>
                            <span>Active Members</span>
                        </div>
                    </div>
                </div>

                <div class="relative animate-float hidden lg:block">
                    <div class="absolute inset-0 bg-gradient-to-tr from-indigo-600 to-purple-600 rounded-[2rem] rotate-3 opacity-20 blur-lg"></div>
                    <div class="carousel-container relative bg-white rounded-[2rem] shadow-2xl overflow-hidden border border-slate-100 aspect-[4/3]">
                        <div id="carouselTrack" class="carousel-track flex h-full">
                            <div class="carousel-slide min-w-full relative">
                                <img src="Meet_with_new_people.png" onerror="this.src='https://images.unsplash.com/photo-1528605248644-14dd04022da1?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80'" class="w-full h-full object-cover" alt="Community">
                                <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent flex items-end p-8">
                                    <p class="text-white font-bold text-xl">Meet new people nearby</p>
                                </div>
                            </div>
                            <div class="carousel-slide min-w-full relative">
                                <img src="for_business.png" onerror="this.src='https://images.unsplash.com/photo-1515187029135-18ee286d815b?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80'" class="w-full h-full object-cover" alt="Business">
                                <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent flex items-end p-8">
                                    <p class="text-white font-bold text-xl">Grow your local network</p>
                                </div>
                            </div>
                        </div>

                        <button id="prevBtn" class="absolute left-4 top-1/2 -translate-y-1/2 w-10 h-10 rounded-full bg-white/90 shadow-lg flex items-center justify-center hover:bg-white transition-colors"><i class="fa-solid fa-chevron-left"></i></button>
                        <button id="nextBtn" class="absolute right-4 top-1/2 -translate-y-1/2 w-10 h-10 rounded-full bg-white/90 shadow-lg flex items-center justify-center hover:bg-white transition-colors"><i class="fa-solid fa-chevron-right"></i></button>
                        
                        <div class="absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-2">
                            <button class="carousel-dot w-2 h-2 rounded-full bg-white/50 active transition-all" data-slide="0"></button>
                            <button class="carousel-dot w-2 h-2 rounded-full bg-white/50 transition-all" data-slide="1"></button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="py-24 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center max-w-3xl mx-auto mb-16">
                <h2 id="featuresTitle" class="text-3xl md:text-4xl font-bold text-slate-900 mb-4">How Organize.Quest Works</h2>
                <p id="featuresSubtitle" class="text-lg text-slate-500">From creating organizations to meeting in real life - everything you need to build your local community.</p>
            </div>

            <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
                <div class="p-8 rounded-3xl bg-slate-50 border border-slate-100 hover:shadow-xl hover:bg-white transition-all duration-300 group">
                    <div class="w-14 h-14 rounded-2xl bg-blue-100 text-blue-600 flex items-center justify-center text-2xl mb-6 group-hover:scale-110 transition-transform">
                        <i class="fa-solid fa-map-marked-alt"></i>
                    </div>
                    <h3 id="feature1Title" class="text-xl font-bold text-slate-900 mb-3">Create & Discover</h3>
                    <p id="feature1Desc" class="text-slate-500 leading-relaxed text-sm">Create your own organization or discover existing ones on the interactive map.</p>
                </div>

                <div class="p-8 rounded-3xl bg-slate-50 border border-slate-100 hover:shadow-xl hover:bg-white transition-all duration-300 group">
                    <div class="w-14 h-14 rounded-2xl bg-purple-100 text-purple-600 flex items-center justify-center text-2xl mb-6 group-hover:scale-110 transition-transform">
                        <i class="fa-solid fa-comments"></i>
                    </div>
                    <h3 id="feature2Title" class="text-xl font-bold text-slate-900 mb-3">Chat & Plan</h3>
                    <p id="feature2Desc" class="text-slate-500 leading-relaxed text-sm">Join organizations and use the built-in chat to communicate with members.</p>
                </div>

                <div class="p-8 rounded-3xl bg-slate-50 border border-slate-100 hover:shadow-xl hover:bg-white transition-all duration-300 group">
                    <div class="w-14 h-14 rounded-2xl bg-pink-100 text-pink-600 flex items-center justify-center text-2xl mb-6 group-hover:scale-110 transition-transform">
                        <i class="fa-solid fa-handshake-simple"></i>
                    </div>
                    <h3 id="feature3Title" class="text-xl font-bold text-slate-900 mb-3">Meet & Participate</h3>
                    <p id="feature3Desc" class="text-slate-500 leading-relaxed text-sm">Once planned, meet at the agreed location and participate in activities.</p>
                </div>

                <div class="p-8 rounded-3xl bg-slate-50 border border-slate-100 hover:shadow-xl hover:bg-white transition-all duration-300 group">
                    <div class="w-14 h-14 rounded-2xl bg-teal-100 text-teal-600 flex items-center justify-center text-2xl mb-6 group-hover:scale-110 transition-transform">
                        <i class="fa-solid fa-users-rays"></i>
                    </div>
                    <h3 id="feature4Title" class="text-xl font-bold text-slate-900 mb-3">Build Community</h3>
                    <p id="feature4Desc" class="text-slate-500 leading-relaxed text-sm">Strengthen relationships and grow your local network with lasting connections.</p>
                </div>
            </div>
        </div>
    </section>

    <section class="py-24 bg-slate-900 text-white relative overflow-hidden">
        <div class="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-5"></div>
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
            <h2 id="howItWorksTitle" class="text-3xl md:text-4xl font-bold text-center mb-16">How It Works</h2>
            
            <div class="grid md:grid-cols-4 gap-8 relative">
                <div class="hidden md:block absolute top-12 left-0 w-full h-0.5 bg-slate-700 -z-10"></div>

                <div class="text-center relative">
                    <div class="w-24 h-24 mx-auto bg-slate-800 rounded-full border-4 border-slate-900 flex items-center justify-center text-3xl font-bold text-indigo-400 mb-6 shadow-xl">1</div>
                    <h3 id="step1Title" class="text-xl font-bold mb-2">Create Account</h3>
                    <p id="step1Desc" class="text-slate-400 text-sm">Sign up in seconds</p>
                </div>

                <div class="text-center relative">
                    <div class="w-24 h-24 mx-auto bg-slate-800 rounded-full border-4 border-slate-900 flex items-center justify-center text-3xl font-bold text-purple-400 mb-6 shadow-xl">2</div>
                    <h3 id="step2Title" class="text-xl font-bold mb-2">Explore Map</h3>
                    <p id="step2Desc" class="text-slate-400 text-sm">Browse organizations</p>
                </div>

                <div class="text-center relative">
                    <div class="w-24 h-24 mx-auto bg-slate-800 rounded-full border-4 border-slate-900 flex items-center justify-center text-3xl font-bold text-pink-400 mb-6 shadow-xl">3</div>
                    <h3 id="step3Title" class="text-xl font-bold mb-2">Join Groups</h3>
                    <p id="step3Desc" class="text-slate-400 text-sm">Connect with others</p>
                </div>

                <div class="text-center relative">
                    <div class="w-24 h-24 mx-auto bg-slate-800 rounded-full border-4 border-slate-900 flex items-center justify-center text-3xl font-bold text-teal-400 mb-6 shadow-xl">4</div>
                    <h3 id="step4Title" class="text-xl font-bold mb-2">Grow</h3>
                    <p id="step4Desc" class="text-slate-400 text-sm">Build your network</p>
                </div>
            </div>
        </div>
    </section>

    <section class="py-24 bg-white">
        <div class="max-w-4xl mx-auto px-4 text-center">
            <span class="text-indigo-600 font-bold tracking-wider uppercase text-sm">Our Mission</span>
            <h2 id="aboutTitle" class="text-3xl md:text-4xl font-bold text-slate-900 mt-2 mb-8">Connecting Communities</h2>
            <div class="prose prose-lg mx-auto text-slate-500">
                <p id="aboutText1" class="mb-6">
                    Organize.Quest is dedicated to strengthening local communities. We believe that real connections happen when people come together for a shared purpose, whether it's a hobby, a cause, or just to have fun.
                </p>
                <p id="aboutText2">
                    Whether you're looking to volunteer, find a sports team, or start a new initiative, we provide the digital tools to make real-world gatherings happen.
                </p>
            </div>
        </div>
    </section>

    <section class="py-24 bg-slate-50">
        <div class="max-w-3xl mx-auto px-4">
            <h2 id="faqTitle" class="text-3xl md:text-4xl font-bold text-center text-slate-900 mb-12">Frequently Asked Questions</h2>
            
            <div class="space-y-4">
                <details class="group bg-white rounded-2xl shadow-sm hover:shadow-md transition-all duration-300">
                    <summary id="faq1Q" class="flex justify-between items-center cursor-pointer p-6 font-bold text-slate-800">
                        Is Organize.Quest free?
                        <span class="transition group-open:rotate-180"><i class="fa-solid fa-chevron-down text-indigo-500"></i></span>
                    </summary>
                    <div id="faq1A" class="px-6 pb-6 text-slate-500 leading-relaxed">
                        Yes! Organize.Quest is completely free for users to browse organizations, create their own groups, and participate in community events.
                    </div>
                </details>

                <details class="group bg-white rounded-2xl shadow-sm hover:shadow-md transition-all duration-300">
                    <summary id="faq2Q" class="flex justify-between items-center cursor-pointer p-6 font-bold text-slate-800">
                        How to create an organization?
                        <span class="transition group-open:rotate-180"><i class="fa-solid fa-chevron-down text-indigo-500"></i></span>
                    </summary>
                    <div id="faq2A" class="px-6 pb-6 text-slate-500 leading-relaxed">
                        Sign up, click on the map, fill details, and publish. It's visible instantly.
                    </div>
                </details>
                
                <details class="group bg-white rounded-2xl shadow-sm hover:shadow-md transition-all duration-300">
                    <summary id="faq6Q" class="flex justify-between items-center cursor-pointer p-6 font-bold text-slate-800">
                        Finding nearby organizations?
                        <span class="transition group-open:rotate-180"><i class="fa-solid fa-chevron-down text-indigo-500"></i></span>
                    </summary>
                    <div id="faq6A" class="px-6 pb-6 text-slate-500 leading-relaxed">
                        Use the "Open Map" button and allow location access to see everything nearby.
                    </div>
                </details>

                <div class="hidden">
                    <span id="faq3Q"></span><span id="faq3A"></span>
                    <span id="faq4Q"></span><span id="faq4A"></span>
                    <span id="faq5Q"></span><span id="faq5A"></span>
                </div>
            </div>
        </div>
    </section>

    <footer class="bg-slate-900 text-slate-400 py-12 border-t border-slate-800">
        <div class="max-w-7xl mx-auto px-4 flex flex-col md:flex-row justify-between items-center gap-8">
            <div class="text-center md:text-left">
                <h3 class="text-2xl font-bold text-white mb-2">Organize<span class="text-indigo-500">.Quest</span></h3>
                <p id="footerTagline" class="text-sm">Building stronger communities.</p>
            </div>
            
            <div class="flex gap-8 font-semibold text-sm">
                <a id="footerHome" href="index.html" class="hover:text-white transition-colors">Home</a>
                <a id="footerOrgs" href="organizations.html" class="hover:text-white transition-colors">Organizations</a>
                <a id="footerProfile" href="profile.html" class="hover:text-white transition-colors">Profile</a>
            </div>

            <p id="footerCopyright" class="text-sm">¬© 2025 Organize.Quest</p>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script>
        const SUPABASE_URL = 'https://ymrxfbkghznrosgfqwrh.supabase.co';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InltcnhmYmtnaHpucm9zZ2Zxd3JoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg0NzQ4MTMsImV4cCI6MjA3NDA1MDgxM30.GyrbrTmWMc6--zCUcfKwc-2qlsBI0z3oly8iv9Fq9-0';
        
        let supabase;
        try {
            if (window.supabase) {
                supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
            }
        } catch (err) {
            console.error('Supabase initialization error:', err);
        }
        
        let currentLang = 'en';
        let currentUser = null;

        // Carousel functionality
        let currentSlide = 0;
        const slides = document.querySelectorAll('.carousel-slide');
        const dots = document.querySelectorAll('.carousel-dot');
        const carouselTrack = document.getElementById('carouselTrack');

        function showSlide(index) {
            currentSlide = index;
            const offset = -100 * currentSlide;
            carouselTrack.style.transform = `translateX(${offset}%)`;
            
            dots.forEach((dot, i) => {
                dot.classList.toggle('active', i === currentSlide);
                dot.classList.toggle('w-8', i === currentSlide); // Active width
                dot.classList.toggle('w-2', i !== currentSlide);  // Inactive width
                dot.classList.toggle('bg-indigo-600', i === currentSlide);
                dot.classList.toggle('bg-white/50', i !== currentSlide);
            });
        }

        function nextSlide() {
            currentSlide = (currentSlide + 1) % slides.length;
            showSlide(currentSlide);
        }

        function prevSlide() {
            currentSlide = (currentSlide - 1 + slides.length) % slides.length;
            showSlide(currentSlide);
        }

        // Auto-advance carousel
        let autoAdvance = setInterval(nextSlide, 5000);

        document.getElementById('nextBtn')?.addEventListener('click', () => {
            nextSlide();
            clearInterval(autoAdvance);
            autoAdvance = setInterval(nextSlide, 5000);
        });

        document.getElementById('prevBtn')?.addEventListener('click', () => {
            prevSlide();
            clearInterval(autoAdvance);
            autoAdvance = setInterval(nextSlide, 5000);
        });

        dots.forEach((dot, index) => {
            dot.addEventListener('click', () => {
                showSlide(index);
                clearInterval(autoAdvance);
                autoAdvance = setInterval(nextSlide, 5000);
            });
        });

        // Cookie Banner Management
        function checkCookieConsent() {
            const consent = localStorage.getItem('cookieConsent');
            if (!consent) {
                setTimeout(() => {
                    document.getElementById('cookieBanner').classList.remove('translate-y-full');
                }, 1000);
            }
        }

        function acceptCookies() {
            localStorage.setItem('cookieConsent', 'accepted');
            document.getElementById('cookieBanner').classList.add('translate-y-full');
        }

        function declineCookies() {
            localStorage.setItem('cookieConsent', 'declined');
            document.getElementById('cookieBanner').classList.add('translate-y-full');
        }

        document.getElementById('acceptCookies').addEventListener('click', acceptCookies);
        document.getElementById('declineCookies').addEventListener('click', declineCookies);
        checkCookieConsent();

        // Translations
        const translations = {
            en: {
                heroTitle: 'Build Your Local Community Network',
                heroDesc: 'Create, discover, and join organizations in your neighborhood. Turn online connections into real-world friendships.',
                startBtn: 'Start Exploring',
                loginBtn: 'Log In',
                openMapBtn: 'Open Map',
                myAccount: 'User',
                logout: 'Logout',
                featuresTitle: 'How Organize.Quest Works',
                featuresSubtitle: 'From creating organizations to meeting in real life - everything you need to build your local community',
                feature1Title: 'Create & Discover',
                feature1Desc: 'Create your own organization or discover existing ones on the interactive map.',
                feature2Title: 'Chat & Plan',
                feature2Desc: 'Join organizations and use the built-in chat to communicate with members.',
                feature3Title: 'Meet & Participate',
                feature3Desc: 'Once everything is planned, meet at the agreed location and participate.',
                feature4Title: 'Build Community',
                feature4Desc: 'Strengthen relationships and grow your local network with lasting connections.',
                howItWorksTitle: 'How It Works',
                step1Title: 'Create Account',
                step1Desc: 'Sign up in seconds',
                step2Title: 'Explore Map',
                step2Desc: 'Browse organizations',
                step3Title: 'Join Groups',
                step3Desc: 'Connect with others',
                step4Title: 'Grow',
                step4Desc: 'Build your network',
                aboutTitle: 'Connecting Communities',
                aboutText1: 'Organize.Quest is dedicated to strengthening local communities. We believe that real connections happen when people come together.',
                aboutText2: 'Whether you\'re looking to volunteer or find a sports team, we provide the digital tools to make real-world gatherings happen.',
                faqTitle: 'Frequently Asked Questions',
                faq1Q: 'Is Organize.Quest free?',
                faq1A: 'Yes! Organize.Quest is completely free for users to browse and join events.',
                faq2Q: 'How to create an organization?',
                faq2A: 'Sign up, click on the map, fill details, and publish.',
                faq6Q: 'Finding nearby organizations?',
                faq6A: 'Use the "Open Map" button to see everything nearby.',
                footerTagline: 'Building stronger communities.',
                footerHome: 'Home',
                footerOrgs: 'Organizations',
                footerProfile: 'Profile',
                footerCopyright: '¬© 2025 Organize.Quest'
            },
            tr: {
                heroTitle: 'Yerel Topluluk Aƒüƒ±nƒ±zƒ± Olu≈üturun',
                heroDesc: 'Mahallenizde organizasyonlar olu≈üturun, ke≈üfedin ve katƒ±lƒ±n. √áevrimi√ßi baƒülantƒ±larƒ± ger√ßek arkada≈ülƒ±klara d√∂n√º≈üt√ºr√ºn.',
                startBtn: 'Ke≈üfetmeye Ba≈üla',
                loginBtn: 'Giri≈ü Yap',
                openMapBtn: 'Haritayƒ± A√ß',
                myAccount: 'Hesabƒ±m',
                logout: '√áƒ±kƒ±≈ü Yap',
                featuresTitle: 'Nasƒ±l √áalƒ±≈üƒ±r?',
                featuresSubtitle: 'Organizasyon kurmaktan ger√ßek hayatta bulu≈ümaya kadar ihtiyacƒ±nƒ±z olan her ≈üey.',
                feature1Title: 'Olu≈ütur & Ke≈üfet',
                feature1Desc: 'Kendi organizasyonunuzu kurun veya haritada var olanlarƒ± ke≈üfedin.',
                feature2Title: 'Sohbet Et & Planla',
                feature2Desc: 'Gruplara katƒ±lƒ±n ve √ºyelerle ileti≈üim kurmak i√ßin sohbeti kullanƒ±n.',
                feature3Title: 'Bulu≈ü & Katƒ±l',
                feature3Desc: 'Plan yapƒ±ldƒ±ktan sonra kararla≈ütƒ±rƒ±lan yerde bulu≈üun.',
                feature4Title: 'Topluluk Kur',
                feature4Desc: 'ƒ∞li≈ükileri g√º√ßlendirin ve yerel aƒüƒ±nƒ±zƒ± b√ºy√ºt√ºn.',
                howItWorksTitle: 'Nasƒ±l √áalƒ±≈üƒ±r',
                step1Title: 'Hesap A√ß',
                step1Desc: 'Saniyeler i√ßinde kaydol',
                step2Title: 'Haritayƒ± Gez',
                step2Desc: 'Organizasyonlara g√∂z at',
                step3Title: 'Gruplara Katƒ±l',
                step3Desc: 'Ba≈ükalarƒ±yla baƒülan',
                step4Title: 'B√ºy√ºt',
                step4Desc: 'Aƒüƒ±nƒ± geni≈ület',
                aboutTitle: 'Topluluklarƒ± Birle≈ütiriyoruz',
                aboutText1: 'Organize.Quest yerel topluluklarƒ± g√º√ßlendirmeye adanmƒ±≈ütƒ±r. Ger√ßek baƒülarƒ±n insanlar bir araya gelince olu≈ütuƒüuna inanƒ±yoruz.',
                aboutText2: 'ƒ∞ster g√∂n√ºll√º olun ister spor takƒ±mƒ± arayƒ±n, ger√ßek bulu≈ümalar i√ßin dijital ara√ßlar sunuyoruz.',
                faqTitle: 'Sƒ±k√ßa Sorulan Sorular',
                faq1Q: '√úcretsiz mi?',
                faq1A: 'Evet! Organize.Quest tamamen √ºcretsizdir.',
                faq2Q: 'Nasƒ±l organizasyon kurulur?',
                faq2A: 'Kaydolun, haritaya tƒ±klayƒ±n ve yayƒ±nlayƒ±n.',
                faq6Q: 'Yakƒ±ndakileri nasƒ±l bulurum?',
                faq6A: 'Haritayƒ± a√ßarak √ßevrenizdeki her ≈üeyi g√∂rebilirsiniz.',
                footerTagline: 'Daha g√º√ßl√º topluluklar in≈üa ediyoruz.',
                footerHome: 'Ana Sayfa',
                footerOrgs: 'Organizasyonlar',
                footerProfile: 'Profil',
                footerCopyright: '¬© 2025 Organize.Quest'
            }
        };

        function switchLanguage(lang) {
            currentLang = lang;
            const btnEN = document.getElementById('btnEN');
            const btnTR = document.getElementById('btnTR');

            if(lang === 'en') {
                btnEN.classList.add('bg-white', 'shadow-sm', 'text-indigo-600');
                btnEN.classList.remove('text-slate-500');
                btnTR.classList.remove('bg-white', 'shadow-sm', 'text-indigo-600');
                btnTR.classList.add('text-slate-500');
            } else {
                btnTR.classList.add('bg-white', 'shadow-sm', 'text-indigo-600');
                btnTR.classList.remove('text-slate-500');
                btnEN.classList.remove('bg-white', 'shadow-sm', 'text-indigo-600');
                btnEN.classList.add('text-slate-500');
            }
            
            const t = translations[lang];
            
            // Safe update for elements that exist
            const ids = [
                'heroTitle', 'heroDesc', 'logoText', 'featuresTitle', 'featuresSubtitle',
                'feature1Title', 'feature1Desc', 'feature2Title', 'feature2Desc',
                'feature3Title', 'feature3Desc', 'feature4Title', 'feature4Desc',
                'howItWorksTitle', 'step1Title', 'step1Desc', 'step2Title', 'step2Desc',
                'step3Title', 'step3Desc', 'step4Title', 'step4Desc',
                'aboutTitle', 'aboutText1', 'aboutText2', 'faqTitle',
                'faq1Q', 'faq1A', 'faq2Q', 'faq2A', 'faq6Q', 'faq6A',
                'footerTagline', 'footerHome', 'footerOrgs', 'footerProfile', 'footerCopyright'
            ];

            ids.forEach(id => {
                const el = document.getElementById(id);
                if(el && t[id]) el.innerHTML = t[id].replace(/\n/g, '<br>');
            });

            // Button texts
            document.getElementById('heroMapBtn').innerHTML = `<i class="fa-solid fa-compass"></i> ${t.startBtn}`;
            document.getElementById('loginBtn').textContent = t.loginBtn;
            document.getElementById('openMapBtn').textContent = t.openMapBtn;
            
            // Only update "User" text if no specific user name is set
            const userMenuName = document.getElementById('userMenuName');
            if (userMenuName && (!currentUser || !currentUser.name)) {
                userMenuName.textContent = t.myAccount;
            }
        }

        // Auth & Menu Logic
        function showUserMenu() {
            document.getElementById('authButtons').classList.add('logged-in'); // Helper class
            document.getElementById('loginBtn').classList.add('hidden');
            document.getElementById('userMenu').classList.remove('hidden');
            
            const userName = currentUser.name || currentUser.email || 'User';
            document.getElementById('userMenuName').textContent = userName;
        }

        function hideUserMenu() {
            document.getElementById('loginBtn').classList.remove('hidden');
            document.getElementById('userMenu').classList.add('hidden');
        }

        document.addEventListener('DOMContentLoaded', function() {
            const savedUser = JSON.parse(localStorage.getItem('currentUser'));
            if (savedUser) {
                currentUser = savedUser;
                showUserMenu();
            }

            document.getElementById('userMenuBtn')?.addEventListener('click', function(e) {
                e.stopPropagation();
                document.getElementById('userDropdown').classList.toggle('hidden');
            });

            document.addEventListener('click', function(e) {
                if(!e.target.closest('#userMenu')) {
                    document.getElementById('userDropdown')?.classList.add('hidden');
                }
            });

            document.getElementById('logoutDropdown')?.addEventListener('click', async function(e) {
                e.preventDefault();
                try {
                    await supabase.auth.signOut();
                } catch (err) { console.error(err); }
                currentUser = null;
                localStorage.removeItem('currentUser');
                hideUserMenu();
                alert('Logged out successfully.');
            });
            
            document.getElementById('btnEN').addEventListener('click', () => switchLanguage('en'));
            document.getElementById('btnTR').addEventListener('click', () => switchLanguage('tr'));
        });
    </script>
</body>
</html>
